<!--
Student IDs: 
  - 301129935
  - 301136902
  - 301180926
  - 301166198
  - 301134374
  - 301153049
WebApp name: Survey Site
Description: Survey-Aditor Component Html - survey-aditor.component.html
-->

<!--Conditional Thank you-->
<!--<div *ngIf='surveySent' class="m-2 text-center">
    <h2>Thanks!</h2>
    <p>Thanks for creating your survey.</p>
    <button class="btn btn-primary" routerLink='/admin/main/surveys'>Return to Surveys</button>
</div> -->

<div *ngIf='!surveySent'>
    <div  class="p-2 text-white">
        <h5>Edit Survey</h5>
    </div>
<!--Form-->
<form novalidate #form='ngForm' (ngSubmit)='updateSurvey(form)'>
    <div class="form-group">
        <label>Survey Title</label>
        <input  type="text" class="form-control" name='title' [(ngModel)]='survey.title'>
    </div>

    <div class="form-group">
        <label>Category</label>
        <input type="text" class="form-control" name='category' [(ngModel)]='survey.category'>
    </div>

    <div class="form-group">
        <label>Description</label>
        <input type="text" class="form-control" name='description' [(ngModel)]='survey.description'>
    </div>

    <div class="form-group">
        <label>Activates In: 
            <input type="date" class="form-control" name='activatesIn' [(ngModel)]='survey.activatesIn'>
        </label>
    </div>

    <div class="form-group">
        <label>How long does the survey stay active? 
            <input type="date" class="form-control" name='deactivatesIn' [(ngModel)]='survey.deactivatesIn'>
        </label>
    </div>

    <!--Buttons-->
    <button class="btn btn-warning m-1" type="submit">
        <i class="fas fa-plus-circle"></i> Edit
    </button>
    <button class="btn btn-secondary m-1" (click)='addQuestion(survey._id)'>
        Add Question
    </button>
    <button class="btn btn-secondary m-1" routerLink='/admin/main/surveys'>
        Back
    </button>

</form>

</div> 
    <!--Conditional Section IF No Surveys-->
<div *ngIf='survey.questionnaire.lines.length == 0' style="text-align: center;">
    <label class="text-center" colspan="4">No questions in this survey</label>
</div> 

    <!--Repeating section for questions-->
    <div *ngFor='let line of survey.questionnaire.lines'>
        <label> {{ line.question.title }} </label><br>
        <ul>
            <li><label class="text-right">{{ line.question.choice1 }}</label></li>
            <li><label class="text-right">{{ line.question.choice2 }}</label></li>
            <li><label class="text-right">{{ line.question.choice3 }}</label></li>
            <li><label class="text-right">{{ line.question.choice4 }}</label></li>
        </ul>
    <button class="btn btn-sm btn-danger"
            (click)='removeQuestion(line.question)'>
            Remove
    </button> 
</div> 